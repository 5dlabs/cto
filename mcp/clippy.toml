# Clippy configuration for MCP server CLI tool
# Based on AWS SDK Rust (smithy-rs) best practices
# CLI-specific: allows println!/eprintln! for user-facing output

# Set the maximum cognitive complexity allowed
cognitive-complexity-threshold = 30

# Set maximum function arguments
too-many-arguments-threshold = 7

# Set maximum lines for functions
too-many-lines-threshold = 100

# Allow unwrap/expect in tests (common practice)
allow-unwrap-in-tests = true
allow-expect-in-tests = true

# Disallow direct time APIs for better testability (AWS smithy-rs pattern)
# Note: MCP CLI tool uses SystemTime for timestamps in commits, which is acceptable
# for CLI tools that don't need time mocking in tests
disallowed-methods = []

# Disallow certain macros
# NOTE: println!/eprintln! are allowed in CLI tools for user-facing output
# Use tracing for internal logging, println!/eprintln! for CLI display
disallowed-macros = [
    { path = "std::dbg", reason = "use tracing::debug! instead; remove before committing" },
]
