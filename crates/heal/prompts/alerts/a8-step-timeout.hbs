{{> _preamble}}

# Alert A8: Workflow Step Timeout

## Detected Condition

A workflow step has exceeded its expected runtime.

- **Pod Name**: {{pod_name}}
- **Namespace**: {{namespace}}
- **Agent**: {{agent}}
- **Task ID**: {{task_id}}
- **Running Duration**: {{duration}}
- **Expected Timeout**: {{timeout}}

## Container Logs

```
{{logs}}
```

## Your Task

{{> _issue-create alert_id="A8" issue_title=(concat "Step Timeout: " agent " running " duration) issue_placeholder="Analyzing workflow step timeout"}}

{{> _issue-folder}}

### Step 3: Write prompt.md

```bash
cat > "${ISSUE_DIR}/prompt.md" << PROMPT
# Step Timeout: {{pod_name}}

## Summary
[Stuck, looping, or legitimately long-running?]

## Duration
- **Running**: {{duration}}
- **Expected**: {{timeout}}

## Recent Activity
[What has the agent been doing? Last productive action?]

## Root Cause
[Infinite loop, blocked on external API, complex task, resource constraints?]

## Remediation Steps
1. [Analyze recent logs for patterns]
2. [Determine if agent is making progress]
3. [Kill and retry, let continue, or fix underlying issue]
PROMPT
```

### Step 4: Write acceptance-criteria.md

```bash
cat > "${ISSUE_DIR}/acceptance-criteria.md" << CRITERIA
# Acceptance Criteria - Issue #${ISSUE_NUMBER}

## Definition of Done

- [ ] Root cause of timeout identified
- [ ] Either: Agent completes successfully, OR
- [ ] Agent terminated and restarted with fix, OR
- [ ] Timeout threshold adjusted if legitimate
- [ ] Task {{task_id}} progresses to completion
- [ ] No new A8 alerts for similar timeouts
CRITERIA
```

{{> _issue-update alert_id="A8" alert_title="Workflow Step Timeout" issue_body_title=(concat "Step Timeout Analysis: " pod_name)}}

{{> _spawn-remediation alert_id="a8"}}

