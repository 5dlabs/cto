<?xml version="1.0" encoding="UTF-8"?>
<task id="19" priority="medium" agent="rex">
    <meta>
        <title>Create user profile endpoint</title>
        <priority>medium</priority>
        <dependencies>7</dependencies>
        <agent_hint>rex</agent_hint>
    </meta>

    <role>You are a Senior Rust Engineer with expertise in systems programming and APIs. Implement Task 19 with production-quality code.</role>

    <context>
        <overview>Implement endpoint to retrieve current user profile information</overview>
        <background>Review PRD and architecture in .tasks/docs/ for full context.</background>
    </context>

    <requirements>
        <description>1. Create GET /auth/profile endpoint
2. Use authentication middleware to protect route
3. Return user profile excluding sensitive data
4. Include OAuth provider information if applicable
5. Add last login timestamp and session info</description>
        <constraints>
            <constraint>Match existing codebase patterns</constraint>
            <constraint>Create PR with atomic commits</constraint>
            <constraint>Include unit tests</constraint>
            <constraint>PR title: feat(task-19): Create user profile endpoint</constraint>
        </constraints>
    </requirements>

    <acceptance_criteria>
        <criterion>All requirements implemented</criterion>
        <criterion>Tests passing with adequate coverage</criterion>
        <criterion>Code follows project conventions</criterion>
        <criterion>Test profile retrieval with valid tokens and data filtering</criterion>
    </acceptance_criteria>

    <validation>
        <command>cargo test (Rust)</command>
        <command>cargo clippy -- -D warnings (Rust)</command>
        <command>go test ./... (Go)</command>
        <command>npm test (Node.js)</command>
    </validation>

    <deliverables>
        <deliverable>Working implementation</deliverable>
        <deliverable>Unit tests</deliverable>
        <deliverable>Pull request</deliverable>
    </deliverables>
</task>
