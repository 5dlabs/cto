<?xml version="1.0" encoding="UTF-8"?>
<task id="28" priority="medium" agent="cipher">
    <meta>
        <title>Setup integration tests for auth flows</title>
        <priority>medium</priority>
        <dependencies>13, 16, 18</dependencies>
        <agent_hint>cipher</agent_hint>
    </meta>

    <role>You are a Senior Security Engineer with expertise in authentication and secure coding. Implement Task 28 with production-quality code.</role>

    <context>
        <overview>Create integration tests for complete authentication workflows</overview>
        <background>Review PRD and architecture in .tasks/docs/ for full context.</background>
    </context>

    <requirements>
        <description>1. Setup test database and Redis instance
2. Test complete registration and login flows
3. Test password reset workflow
4. Test token refresh and logout flows
5. Test rate limiting and error scenarios</description>
        <constraints>
            <constraint>Match existing codebase patterns</constraint>
            <constraint>Create PR with atomic commits</constraint>
            <constraint>Include unit tests</constraint>
            <constraint>PR title: feat(task-28): Setup integration tests for auth flows</constraint>
        </constraints>
    </requirements>

    <acceptance_criteria>
        <criterion>All requirements implemented</criterion>
        <criterion>Tests passing with adequate coverage</criterion>
        <criterion>Code follows project conventions</criterion>
        <criterion>Verify all authentication flows work end-to-end</criterion>
    </acceptance_criteria>

    <validation>
        <command>cargo test (Rust)</command>
        <command>cargo clippy -- -D warnings (Rust)</command>
        <command>go test ./... (Go)</command>
        <command>npm test (Node.js)</command>
    </validation>

    <deliverables>
        <deliverable>Working implementation</deliverable>
        <deliverable>Unit tests</deliverable>
        <deliverable>Pull request</deliverable>
    </deliverables>
</task>
