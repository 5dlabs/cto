# =========================================================================
# GitHub Authentication
# =========================================================================

GITHUB_APP="{{github_app}}"
GH_HOST="${GH_HOST:-github.com}"

# Export GitHub token
if [ -z "${GH_TOKEN:-}" ]; then
  export GH_TOKEN="${GITHUB_TOKEN:-}"
fi

# Configure git credential helper for GitHub App token
if [ -n "${GITHUB_TOKEN:-}" ]; then
  git config --global credential.helper "!f() { echo \"password=\$GITHUB_TOKEN\"; }; f"
  git config --global url."https://x-access-token:${GITHUB_TOKEN}@github.com/".insteadOf "https://github.com/"
  echo "âœ… GitHub credential helper configured"
fi

# Git author configuration
GIT_AUTHOR_NAME="${GITHUB_APP} Agent"
GIT_AUTHOR_EMAIL="${GITHUB_APP}[bot]@users.noreply.github.com"

export GIT_AUTHOR_NAME
export GIT_AUTHOR_EMAIL
export GIT_COMMITTER_NAME="$GIT_AUTHOR_NAME"
export GIT_COMMITTER_EMAIL="$GIT_AUTHOR_EMAIL"
export GIT_TERMINAL_PROMPT=0


