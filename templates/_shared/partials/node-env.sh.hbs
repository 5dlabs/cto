# =========================================================================
# Node.js Environment Bootstrap
# =========================================================================

# Source NVM if available
export NVM_DIR="${NVM_DIR:-$HOME/.nvm}"
if [ -s "$NVM_DIR/nvm.sh" ]; then
  . "$NVM_DIR/nvm.sh"
fi

# Source fnm if available
if command -v fnm >/dev/null 2>&1; then
  eval "$(fnm env)"
fi

# Add common Node paths
export PATH="$HOME/.npm-global/bin:$PATH"
export PATH="./node_modules/.bin:$PATH"

# Verify Node is available
if command -v node >/dev/null 2>&1; then
  echo "Node version: $(node --version)"
  echo "npm version: $(npm --version 2>/dev/null || echo 'not found')"
else
  echo "⚠️ Node.js not found in PATH"
fi

# Enable corepack for pnpm/yarn if available
# Suppress errors when symlinks already exist or can't be created
if command -v corepack >/dev/null 2>&1; then
  corepack enable 2>&1 | grep -v "EINVAL\|readlink\|already exists" || true
fi


