<?xml version="1.0" encoding="UTF-8"?>
<task id="3" priority="high" agent="rex">
    <meta>
        <title>Set up Redis for caching and session management</title>
        <priority>high</priority>
        <dependencies>1</dependencies>
        <agent_hint>rex</agent_hint>
    </meta>

    <role>You are a Senior Rust Engineer with expertise in systems programming and APIs. Implement Task 3 with production-quality code.</role>

    <context>
        <overview>Configure Redis connection for rate limiting, session storage, and pub/sub notifications</overview>
        <background>Review PRD and architecture in .tasks/docs/ for full context.</background>
    </context>

    <requirements>
        <description>1. Add redis crate dependency and configure connection pool
2. Create Redis service layer with methods for session management
3. Implement rate limiting storage using Redis with sliding window
4. Set up pub/sub channels for real-time notifications
5. Add Redis health check to startup sequence</description>
        <constraints>
            <constraint>Match existing codebase patterns</constraint>
            <constraint>Create PR with atomic commits</constraint>
            <constraint>Include unit tests</constraint>
            <constraint>PR title: feat(task-3): Set up Redis for caching and session management</constraint>
        </constraints>
    </requirements>

    <acceptance_criteria>
        <criterion>All requirements implemented</criterion>
        <criterion>Tests passing with adequate coverage</criterion>
        <criterion>Code follows project conventions</criterion>
        <criterion>Verify Redis connectivity, test session storage/retrieval, validate rate limiting counters work correctly</criterion>
    </acceptance_criteria>

    <validation>
        <command>cargo test (Rust)</command>
        <command>cargo clippy -- -D warnings (Rust)</command>
        <command>go test ./... (Go)</command>
        <command>npm test (Node.js)</command>
    </validation>

    <deliverables>
        <deliverable>Working implementation</deliverable>
        <deliverable>Unit tests</deliverable>
        <deliverable>Pull request</deliverable>
    </deliverables>
</task>
