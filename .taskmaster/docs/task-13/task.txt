# Task ID: 13
# Title: Deploy and Test Toolman Service
# Status: pending
# Dependencies: 1, 2, 3
# Priority: high
# Description: Verify the existing Toolman deployment in the MCP namespace and test its accessibility from within the cluster
# Details:
Current Deployment Status:
- Toolman is ALREADY DEPLOYED in the 'mcp' namespace
- Service URL: http://toolman.mcp.svc.cluster.local:3000
- Image: ghcr.io/5dlabs/toolman:main-4685f6f
- ConfigMap: toolman-config (contains MCP server definitions)

Verification steps:
```bash
# Verify current deployment
kubectl get deployment toolman -n mcp
kubectl get pods -n mcp -l app.kubernetes.io/name=toolman
kubectl get service toolman -n mcp

# Check logs for any issues
kubectl logs -n mcp -l app.kubernetes.io/name=toolman --tail=50

# Test health and readiness endpoints
kubectl run test-pod --rm -it --image=curlimages/curl -- \
  curl http://toolman.mcp.svc.cluster.local:3000/health

kubectl run test-pod --rm -it --image=curlimages/curl -- \
  curl http://toolman.mcp.svc.cluster.local:3000/ready

# Test MCP server proxy functionality
kubectl run test-pod --rm -it --image=curlimages/curl -- \
  curl -X POST http://toolman.mcp.svc.cluster.local:3000/mcp \
  -H "Content-Type: application/json" \
  -d '{"method": "tools/list", "params": {}}'

# List available MCP servers
kubectl run test-pod --rm -it --image=curlimages/curl -- \
  curl http://toolman.mcp.svc.cluster.local:3000/mcp/servers

# Verify ConfigMap contents
kubectl get configmap toolman-config -n mcp -o yaml

# Test from within mcp namespace (shorter service name)
kubectl run test-pod --rm -it --image=curlimages/curl -n mcp -- \
  curl http://toolman:3000/health
```

# Test Strategy:
Verify existing deployment is healthy. Test /health and /ready endpoints respond with HTTP 200. Test MCP proxy endpoint returns expected tool list. Verify MCP servers configured in ConfigMap are accessible through the proxy. Confirm service is reachable at http://toolman.mcp.svc.cluster.local:3000 from any namespace and http://toolman:3000 from within mcp namespace
