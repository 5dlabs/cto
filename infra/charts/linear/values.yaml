# Default values for linear service
# This is a YAML-formatted file.

replicaCount: 1

image:
  repository: ghcr.io/5dlabs/linear
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  name: ""

podAnnotations: {}

podSecurityContext: {}

securityContext: {}

service:
  type: ClusterIP
  port: 8081

resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}

# Linear service configuration
linear:
  # Enable Linear integration
  enabled: true
  # HTTP server port
  port: 8081
  # Maximum webhook timestamp age in milliseconds
  maxTimestampAgeMs: 60000
  # Kubernetes namespace for workflow operations
  namespace: cto

# Secrets configuration
# These should be provided via Vault or external secrets
secrets:
  # Name of the Kubernetes secret containing Linear credentials
  secretName: linear-secrets
  # Keys in the secret
  oauthClientIdKey: LINEAR_OAUTH_CLIENT_ID
  oauthClientSecretKey: LINEAR_OAUTH_CLIENT_SECRET
  oauthTokenKey: LINEAR_OAUTH_TOKEN
  webhookSecretKey: LINEAR_WEBHOOK_SECRET
  # GitHub token for API calls (optional, but needed for task fetching)
  githubTokenKey: GITHUB_TOKEN

# GitHub webhook auto-configuration
github:
  # Callback URL for GitHub webhooks (e.g., https://linear-webhooks.5dlabs.ai)
  # If set, the service will auto-create webhooks on the configured repos
  webhookCallbackUrl: ""
  # Comma-separated list of repos to configure webhooks on (e.g., "5dlabs/cto,5dlabs/other")
  webhookRepos: ""

# Workflow configuration
intake:
  githubApp: cto-dev
  primaryModel: claude-sonnet-4-20250514
  primaryProvider: anthropic
  researchModel: claude-sonnet-4-20250514
  researchProvider: anthropic
  fallbackModel: claude-sonnet-4-20250514
  fallbackProvider: anthropic
  docsModel: claude-sonnet-4-20250514
  numTasks: 50
  cli: claude

play:
  githubApp: cto-dev
  model: claude-sonnet-4-20250514
  implementationAgent: rex
  testingAgent: tess
  qualityAgent: cleo
  frontendAgent: blaze
  parallelExecution: false
  autoMerge: false
  # Default repository (optional)
  # repository: "https://github.com/5dlabs/cto"

