---
# SecretStore that reads from environment variables
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: orchestrator-env-store
  namespace: {{ .Release.Namespace }}
spec:
  provider:
    env: {}

---
# ExternalSecret for API keys
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: orchestrator-api-keys
  namespace: {{ .Release.Namespace }}
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: orchestrator-env-store
    kind: SecretStore
  target:
    name: orchestrator-api-keys
    creationPolicy: Owner
  data:
  - secretKey: anthropic-api-key
    remoteRef:
      key: ANTHROPIC_API_KEY
  - secretKey: perplexity-api-key
    remoteRef:
      key: PERPLEXITY_API_KEY
  - secretKey: openai-api-key
    remoteRef:
      key: OPENAI_API_KEY
  - secretKey: google-api-key
    remoteRef:
      key: GOOGLE_API_KEY
  - secretKey: xai-api-key
    remoteRef:
      key: XAI_API_KEY
  - secretKey: gemini-api-key
    remoteRef:
      key: GEMINI_API_KEY