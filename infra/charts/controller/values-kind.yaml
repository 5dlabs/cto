# Values override for Kind local development
# Use with: helm upgrade --install controller . -n cto -f values-kind.yaml

image:
  repository: ghcr.io/5dlabs/controller
  pullPolicy: Never  # Use local image loaded via `kind load docker-image`
  tag: "kind-local"

# Disable affinity constraints for single-node Kind cluster
# Allow scheduling on control-plane node since Kind only has one node
affinity: {}
nodeSelector: {}
tolerations:
  - key: "node-role.kubernetes.io/control-plane"
    operator: "Exists"
    effect: "NoSchedule"

# Agent images - use runtime:kind-tasks which includes the tasks CLI
# Note: For intake workflows, we need the tasks CLI which is in runtime:kind-tasks
agent:
  image:
    repository: ghcr.io/5dlabs/runtime
    tag: "kind-tasks"
    pullPolicy: Never  # Use local image loaded via `kind load docker-image`

# Disable image pull secrets for local images
imagePullSecrets: []

# Resources - lower for local development
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Storage - use local-path for Kind
storage:
  storageClassName: "standard"  # Kind default
  workspaceSize: "1Gi"

# Secrets configuration - use existing secrets
secrets:
  anthropicApiKey: "use-existing"
  openaiApiKey: "use-existing"
  apiKeySecretName: "cto-secrets"

# Controller configuration
config:
  kubernetesNamespace: "cto"
  serverHost: "0.0.0.0"
  serverPort: "8080"
  rustLog: "info,controller=debug"

# Disable notifications for local testing
notifications:
  enabled: false

# Keep RBAC enabled
rbac:
  create: true

