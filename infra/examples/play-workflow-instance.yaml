# Example: Submit a Play Workflow Instance
# This demonstrates how to create a workflow from the play-workflow-template
#
# To submit this workflow:
# kubectl apply -f play-workflow-instance.yaml
#
# Or using Argo CLI:
# argo submit --from workflowtemplate/play-workflow-template \
#   -p task-id=3 \
#   -p implementation-agent=5DLabs-Rex \
#   -p quality-agent=5DLabs-Cleo \
#   -p testing-agent=5DLabs-Tess

apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  # Deterministic name based on task ID for correlation
  name: play-task-3-workflow
  namespace: automation
  labels:
    workflow-type: play-orchestration
    task-id: "3"
    current-stage: "starting"
    repository: "5dlabs/cto"
spec:
  # Reference the workflow template
  workflowTemplateRef:
    name: play-workflow-template

  # Override specific parameters for this instance
  arguments:
    parameters:
      # Task configuration
      - name: task-id
        value: "3"
      - name: repository
        value: "5dlabs/cto"
      - name: service
        value: "cto"

      # Agent selection (can use different agents)
      - name: implementation-agent
        value: "5DLabs-Rex"
      - name: quality-agent
        value: "5DLabs-Cleo"
      - name: testing-agent
        value: "5DLabs-Tess"

      # Model configuration
      - name: model
        value: "claude-3-5-sonnet-20241022"

---
# Alternative: Using Blaze for implementation
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  name: play-task-4-workflow
  namespace: automation
  labels:
    workflow-type: play-orchestration
    task-id: "4"
    current-stage: "starting"
    repository: "5dlabs/cto"
spec:
  workflowTemplateRef:
    name: play-workflow-template

  arguments:
    parameters:
      - name: task-id
        value: "4"
      - name: repository
        value: "5dlabs/cto"
      - name: service
        value: "cto"

      # Using Blaze instead of Rex for implementation
      - name: implementation-agent
        value: "5DLabs-Blaze"
      - name: quality-agent
        value: "5DLabs-Cleo"
      - name: testing-agent
        value: "5DLabs-Tess"

      - name: model
        value: "claude-3-5-sonnet-20241022"
