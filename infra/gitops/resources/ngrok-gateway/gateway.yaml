---
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: public-gateway
  namespace: argo
  annotations:
    # TEMPORARILY REDUCED: Only keeping GitHub webhook endpoint to reduce Ngrok costs
    external-dns.alpha.kubernetes.io/hostname: "github.public.5dlabs.ai"
    # Commented out other domains to reduce costs: "public.5dlabs.ai,5dlabs.ai,www.5dlabs.ai"
    k8s.ngrok.com/traffic-policy: security-policy
spec:
  gatewayClassName: ngrok
  listeners:
    # TEMPORARILY DISABLED: Other listeners to reduce Ngrok endpoint costs
    # - name: https
    #   protocol: HTTPS
    #   port: 443
    #   hostname: "public.5dlabs.ai"
    #   allowedRoutes:
    #     namespaces:
    #       from: All
    - name: github
      protocol: HTTPS
      port: 443
      hostname: "github.public.5dlabs.ai"
      allowedRoutes:
        namespaces:
          from: All
    # TEMPORARILY DISABLED: Root domain listener to reduce costs
    # - name: root
    #   protocol: HTTPS
    #   port: 443
    #   hostname: "5dlabs.ai"
    #   allowedRoutes:
    #     namespaces:
    #       from: All
    # TEMPORARILY DISABLED: WWW listener to reduce costs
    # - name: www
    #   protocol: HTTPS
    #   port: 443
    #   hostname: "www.5dlabs.ai"
    #   allowedRoutes:
    #     namespaces:
    #       from: All

