---
# ExternalSecrets for observability namespace
# Discord webhook for Alertmanager notifications

# =============================================================================
# alertmanager-discord-secret - Discord webhook URL for alert notifications
# =============================================================================
# To add the secret to OpenBao:
#   bao kv put secret/alertmanager-discord webhook-url="https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN"
# =============================================================================
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: alertmanager-discord-secret
  namespace: observability
  labels:
    app.kubernetes.io/managed-by: external-secrets
    app.kubernetes.io/component: alertmanager
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: openbao
    kind: ClusterSecretStore
  target:
    name: alertmanager-discord-secret
    creationPolicy: Owner
  data:
    - secretKey: DISCORD_WEBHOOK_URL
      remoteRef:
        key: alertmanager-discord
        property: webhook-url
