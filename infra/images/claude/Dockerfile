ARG BASE_IMAGE=ghcr.io/5dlabs/cto/runtime:latest
FROM ${BASE_IMAGE}

ARG TZ
ENV TZ="$TZ"

ARG USERNAME=node
ENV DEVCONTAINER=true
RUN mkdir -p /workspace /home/node/.claude && \
  chown -R node:node /workspace /home/node/.claude
WORKDIR /workspace
USER node

# Install Claude (generic VERSION only)
ARG VERSION=latest
RUN export PATH=/usr/local/bin:$PATH && \
    npm install -g @anthropic-ai/claude-code@${VERSION}
