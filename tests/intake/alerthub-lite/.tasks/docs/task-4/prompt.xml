<?xml version="1.0" encoding="UTF-8"?>
<task id="4" priority="medium" agent="blaze">
    <meta>
        <title>Implement API Integration and State Management</title>
        <priority>medium</priority>
        <dependencies>3</dependencies>
        <agent_hint>blaze</agent_hint>
    </meta>

    <role>You are a Senior Frontend Engineer with expertise in React, TypeScript, and modern UI/UX. Implement Task 4 with production-quality code.</role>

    <context>
        <overview>Connect frontend to backend API with proper error handling, loading states, and optimistic updates</overview>
        <background>Review PRD and architecture in .tasks/docs/ for full context.</background>
    </context>

    <requirements>
        <description>1. Configure API client with proper base URL and error handling
2. Implement TanStack Query hooks for all API endpoints
3. Add optimistic updates for create/delete operations
4. Handle loading states and error boundaries
5. Implement pagination for notification list
6. Add form validation with React Hook Form
7. Configure proper cache invalidation strategies
8. Add retry logic for failed requests</description>
        <constraints>
            <constraint>Match existing codebase patterns</constraint>
            <constraint>Create PR with atomic commits</constraint>
            <constraint>Include unit tests</constraint>
            <constraint>PR title: feat(task-4): Implement API Integration and State Management</constraint>
        </constraints>
    </requirements>

    <acceptance_criteria>
        <criterion>All requirements implemented</criterion>
        <criterion>Tests passing with adequate coverage</criterion>
        <criterion>Code follows project conventions</criterion>
        <criterion>Test API integration with mock server, verify error handling scenarios, test optimistic updates rollback, validate pagination and caching behavior</criterion>
    </acceptance_criteria>

    <validation>
        <command>cargo test (Rust)</command>
        <command>cargo clippy -- -D warnings (Rust)</command>
        <command>go test ./... (Go)</command>
        <command>npm test (Node.js)</command>
    </validation>

    <deliverables>
        <deliverable>Working implementation</deliverable>
        <deliverable>Unit tests</deliverable>
        <deliverable>Pull request</deliverable>
    </deliverables>
</task>
