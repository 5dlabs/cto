---
# Example requirements.yaml for doc server projects
# Place this file at: {docs_project_directory}/requirements.yaml
# This will apply to ALL tasks in the project

# Secrets from Kubernetes (managed by External Secrets)
secrets:
  - name: doc-server-secrets

# Static environment variables (non-secret configuration)
environment:
  # Server Configuration
  PORT: "3000"
  RUST_LOG: "info,doc_server=debug"

  # OpenAI API Configuration
  OPENAI_BASE_URL: "https://api.openai.com/v1"
  OPENAI_EMBEDDING_MODEL: "text-embedding-3-large"
  OPENAI_MAX_TOKENS: "8192"
  OPENAI_TEMPERATURE: "0.1"

  # Batch processing settings
  EMBEDDING_BATCH_SIZE: "100"
  EMBEDDING_BATCH_TIMEOUT_SECONDS: "60"

  # Rate limiting
  RATE_LIMIT_REQUESTS_PER_MINUTE: "100"
  RATE_LIMIT_BURST_SIZE: "20"

  # Caching (Redis) - using the existing Redis instance
  REDIS_URL: "redis://redis-auth-service.databases.svc.cluster.local:6379"
  CACHE_TTL_SECONDS: "3600"

  # Development settings
  DEVELOPMENT_MODE: "true"
  CORS_ALLOWED_ORIGINS: "http://localhost:3000,http://localhost:8080"

  # Monitoring and observability
  METRICS_ENABLED: "true"
  HEALTH_CHECK_INTERVAL_SECONDS: "30"

  # Documentation ingestion settings
  DOCS_RS_BASE_URL: "https://docs.rs"
  MAX_CONCURRENT_DOWNLOADS: "5"
  DOWNLOAD_TIMEOUT_SECONDS: "300"

  # Vector search settings
  VECTOR_SEARCH_LIMIT: "50"
  SIMILARITY_THRESHOLD: "0.7"
