---
description: Enforce green CI before PR creation or marking tasks as done across docs-driven workflows
globs: docs/**/*
alwaysApply: true
---

- **CI must be green before PR or task completion**
  - All GitHub Actions jobs must pass before opening a PR or marking any task/subtask as done
  - If the workflow includes a deploy stage, it must complete successfully prior to PR creation/merge
  - Apply this to all tasks in `.taskmaster/docs/*` to keep acceptance criteria consistent

- **Local quality gates before pushing**
  - Run and fix these checks locally before the final push:
  ```bash
  cargo fmt --all -- --check
  cargo clippy --all-targets --all-features -- -D warnings -W clippy::pedantic
  cargo test --all-features
  ```
  - Only push when the above are clean to minimize CI churn

- **PR gating and workflow**
  - Work on a feature branch; never push directly to `main`
  - Open the PR only after CI is green and (when applicable) deployment succeeded

- **DO**
  - Keep PRs small and focused to speed up CI and reviews
  - Re-run CI after fixes until green

- **DON'T**
  - Don’t create a PR with failing CI
  - Don’t mark tasks done without a green pipeline
