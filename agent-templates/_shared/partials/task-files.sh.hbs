# =========================================================================
# Task Files
# =========================================================================

mkdir -p "$CLI_WORK_DIR/task"
cp -R /task-files/* "$CLI_WORK_DIR/task/" 2>/dev/null || true

# Verify critical task files
echo ""
echo "ðŸ“ Task Files:"

# Prompt (required)
if [ -f "$CLI_WORK_DIR/task/prompt.md" ]; then
    echo "  âœ“ prompt.md"
else
    echo "  âš ï¸ prompt.md not found"
fi

# Acceptance Criteria (required for verification)
if [ -f "$CLI_WORK_DIR/task/acceptance-criteria.md" ]; then
    echo "  âœ“ acceptance-criteria.md"
    # Count criteria for summary
    CRITERIA_COUNT=$(grep -cE '^\s*-\s*\[([ x])\]' "$CLI_WORK_DIR/task/acceptance-criteria.md" 2>/dev/null || echo "0")
    echo "    â””â”€ $CRITERIA_COUNT criteria items"
else
    echo "  âš ï¸ acceptance-criteria.md not found (verification will be skipped)"
fi

# Task definition
if [ -f "$CLI_WORK_DIR/task/task.md" ]; then
    echo "  âœ“ task.md"
fi

# Tools config (optional)
if [ -f /task-files/tools-config.json ]; then
    cp /task-files/tools-config.json "$CLI_WORK_DIR/" 2>/dev/null || true
    echo "  âœ“ tools-config.json"
fi

# Tools guide (optional)
if [ -f "$CLI_WORK_DIR/task/tools-guide.md" ]; then
    echo "  âœ“ tools-guide.md"
fi

# Agent guidelines
if [ -f /task-files/AGENTS.md ]; then
    cp /task-files/AGENTS.md "$CLI_WORK_DIR/"
    echo "  âœ“ AGENTS.md"
fi

echo ""
