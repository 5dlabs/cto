---
# DEPRECATED: This workflow has been moved to infrastructure-build.yaml
# The rust-builder image is now built as part of the infrastructure workflow
# Use the infrastructure-build.yaml workflow with image=rust-builder parameter

name: Build Rust Builder Image (DEPRECATED)

on:
  # Workflow disabled - moved to infrastructure-build.yaml
  workflow_dispatch:
    inputs:
      _deprecated:
        description: 'This workflow is deprecated. Use infrastructure-build.yaml with image=rust-builder'
        required: false
        type: string

env:
  REGISTRY: ghcr.io
  IMAGE_NAME: 5dlabs/rust-builder

jobs:
  deprecated-notice:
    runs-on: ubuntu-latest
    steps:
      - name: Deprecation Notice
        run: |
          echo "üö® This workflow has been DEPRECATED"
          echo ""
          echo "The rust-builder image build has been moved to the infrastructure-build.yaml workflow"
          echo "for better organization of infrastructure vs agent images."
          echo ""
          echo "To build the rust-builder image, use:"
          echo "  - Go to Actions ‚Üí Infrastructure Images workflow"
          echo "  - Click 'Run workflow'"
          echo "  - Set image parameter to 'rust-builder'"
          echo ""
          echo "Or trigger via API:"
          echo "gh workflow run infrastructure-build.yaml -f image=rust-builder"
          echo ""
          echo "‚ö†Ô∏è  This workflow will be removed in a future update."

          exit 1  # Fail the job to make it clear this is deprecated
